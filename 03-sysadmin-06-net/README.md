# Домашнее задание к занятию "3.6. Компьютерные сети, лекция 1"

1. Необязательное задание:
можно посмотреть целый фильм в консоли `telnet towel.blinkenlights.nl` :)

1. Узнайте о том, сколько действительно независимых (не пересекающихся) каналов есть в разделяемой среде WiFi при работе на 2.4 ГГц. Стандарты с полосой 5 ГГц более актуальны, но регламенты на 5 ГГц существенно различаются в разных странах, а так же не раз обновлялись. В качестве дополнительного вопроса вне зачета, попробуйте найти актуальный ответ и на этот вопрос.

   2.4 ГГц независимыми или непересекающимися являются только три канала: 1-й, 6-й и 11-й

1. Адрес канального уровня – MAC адрес – это 6 байт, первые 3 из которых называются OUI – Organizationally Unique Identifier или уникальный идентификатор организации. Какому производителю принадлежит MAC `38:f9:d3:55:55:79`?

    Apple, Inc.

1. Каким будет payload TCP сегмента, если Ethernet MTU задан в 9001 байт, размер заголовков IPv4 – 20 байт, а TCP – 32 байта?

   9001-20-32=8949
   ![изображение](https://user-images.githubusercontent.com/91043924/143882084-9afbd800-0c8f-458e-b52d-698e0ddd45bc.png)


1. Может ли во флагах TCP одновременно быть установлены флаги SYN и FIN при штатном режиме работы сети? Почему да или нет?

     Комбинация флага SYN и FIN, устанавливаемого в заголовке TCP, является недопустимой и относится к категории комбинации недопустимого / ненормального флага, поскольку она требует как установления соединения (через SYN), так и прекращения соединения (через FIN).

     Способ обработки таких недопустимых / аномальных комбинаций флагов не передается в RFC TCP. Таким образом, такие недопустимые / ненормальные комбинации флагов обрабатываются по-разному в разных операционных системах. Различные операционные системы также генерируют разные типы ответов для таких пакетов.

1. `ss -ula sport = :53` на хосте имеет следующий вывод:

```bash
State           Recv-Q          Send-Q                   Local Address:Port                     Peer Address:Port          Process
UNCONN          0               0                        127.0.0.53%lo:domain                        0.0.0.0:*
```

Почему в `State` присутствует только `UNCONN`, и может ли там присутствовать, например, `TIME-WAIT`?

   флаг -u - показывает udp сокеты 
   UDP sockets do not have a established state, because the protocol is connectionless. - так как не устанавливается предварительное соединение- то и статуа TIME-WAIT быть не может.

7. Обладая знаниями о том, как штатным образом завершается соединение (FIN от инициатора, FIN-ACK от ответчика, ACK от инициатора), опишите в каких состояниях будет находиться TCP соединение в каждый момент времени на клиенте и на сервере при завершении. Схема переходов состояния соединения вам в этом поможет.

   ![изображение](https://user-images.githubusercontent.com/91043924/143884442-1bffb92e-5e29-4d90-a860-f55666c746c8.png)
   После завершения обмена данными одна из сторон (например, клиент) отправляет сегмент FIN, переходя при этом в состояние FIN-WAIT-1. Приняв этот сегмент другая сторона (например, сервер) отправляет подтверждение ACK и переходит в состояние CLOSE-WAIT, при этом канал становится симплексным — передача данных возможна только в направлении от сервера к клиенту. Когда клиент получает подтверждение он переходит в состояние FIN-WAIT-2, в котором находится до получения сегмента FIN. После подтверждения получения этого сегмента канал окончательно разрушается.

1. TCP порт – 16 битное число. Предположим, 2 находящихся в одной сети хоста устанавливают между собой соединения. Каким будет теоретическое максимальное число соединений, ограниченное только лишь параметрами L4, которое параллельно может установить клиент с одного IP адреса к серверу с одним IP адресом? Сколько соединений сможет обслужить сервер от одного клиента? А если клиентов больше одного?

1. Может ли сложиться ситуация, при которой большое число соединений TCP на хосте находятся в состоянии  `TIME-WAIT`? Если да, то является ли она хорошей или плохой? Подкрепите свой ответ пояснением той или иной оценки.

1. Чем особенно плоха фрагментация UDP относительно фрагментации TCP?

   Если потеряется часть фрагмента tcp - протокол просто запросит повтоную отправку, у udp же эти данные теряются.

1. Если бы вы строили систему удаленного сбора логов, то есть систему, в которой несколько хостов отправяют на центральный узел генерируемые приложениями логи (предположим, что логи – текстовая информация), какой протокол транспортного уровня вы выбрали бы и почему? Проверьте ваше предположение самостоятельно, узнав о стандартном протоколе syslog.

   TCP, так как есть механизм гарантированной доставки пакетов. 

1. Сколько портов TCP находится в состоянии прослушивания на вашей виртуальной машине с Ubuntu, и каким процессам они принадлежат?

     vagrant@vagrant:~$ sudo ss -l -t -p
     State             Recv-Q            Send-Q                       Local Address:Port                           Peer Address:Port            Process
     LISTEN            0                 4096                         127.0.0.53%lo:domain                              0.0.0.0:*                users:(("systemd-resolve",pid=563,fd=13))
     LISTEN            0                 128                                0.0.0.0:ssh                                 0.0.0.0:*                users:(("sshd",pid=717,fd=3))
     LISTEN            0                 4096                             127.0.0.1:8125                                0.0.0.0:*                users:(("netdata",pid=700,fd=53))
     LISTEN            0                 4096                               0.0.0.0:19999                               0.0.0.0:*                users:(("netdata",pid=700,fd=4))
     LISTEN            0                 4096                               0.0.0.0:sunrpc                              0.0.0.0:*                users:(("rpcbind",pid=561,fd=4),("systemd",pid=1,fd=102))
     LISTEN            0                 128                                   [::]:ssh                                    [::]:*                users:(("sshd",pid=717,fd=4))
     LISTEN            0                 4096                                 [::1]:8125                                   [::]:*                users:(("netdata",pid=700,fd=48))
     LISTEN            0                 4096                                  [::]:sunrpc                                 [::]:*                users:(("rpcbind",pid=561,fd=6),("systemd",pid=1,fd=104))
     
     systemd sshd netdata 

1. Какой ключ нужно добавить в `tcpdump`, чтобы он начал выводить не только заголовки, но и содержимое фреймов в текстовом виде? А в текстовом и шестнадцатиричном?

1. Попробуйте собрать дамп трафика с помощью `tcpdump` на основном интерфейсе вашей виртуальной машины и посмотреть его через tshark или Wireshark (можно ограничить число пакетов `-c 100`). Встретились ли вам какие-то установленные флаги Internet Protocol (не флаги TCP, а флаги IP)? Узнайте, какие флаги бывают. Как на самом деле называется стандарт Ethernet, фреймы которого попали в ваш дамп? Можно ли где-то в дампе увидеть OUI?

 
