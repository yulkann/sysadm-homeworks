# Домашнее задание к занятию "3.7. Компьютерные сети, лекция 2"

1. Проверьте список доступных сетевых интерфейсов на вашем компьютере. Какие команды есть для этого в Linux и в Windows?

         C:\Users\Юлия>ipconfig /all

         Настройка протокола IP для Windows

            Имя компьютера  . . . . . . . . . : yulka-magicbook
            Основной DNS-суффикс  . . . . . . :
            Тип узла. . . . . . . . . . . . . : Гибридный
            IP-маршрутизация включена . . . . : Нет
            WINS-прокси включен . . . . . . . : Нет
            Порядок просмотра суффиксов DNS . : x5.ru

         Адаптер Ethernet Ethernet 2:

            DNS-суффикс подключения . . . . . : x5.ru
            Описание. . . . . . . . . . . . . : Cisco AnyConnect Secure Mobility Client Virtual Miniport Adapter for Windows x64
            Физический адрес. . . . . . . . . : 00-05-9A-3C-7A-00
            DHCP включен. . . . . . . . . . . : Нет
            Автонастройка включена. . . . . . : Да
            IPv4-адрес. . . . . . . . . . . . : 172.20.111.105(Основной)
            Маска подсети . . . . . . . . . . : 255.255.240.0
            Основной шлюз. . . . . . . . . :
            DNS-серверы. . . . . . . . . . . : 192.168.39.103
                                                192.168.39.84
            NetBios через TCP/IP. . . . . . . . : Включен

         Адаптер Ethernet Ethernet:

            DNS-суффикс подключения . . . . . :
            Описание. . . . . . . . . . . . . : VirtualBox Host-Only Ethernet Adapter
            Физический адрес. . . . . . . . . : 0A-00-27-00-00-16
            DHCP включен. . . . . . . . . . . : Нет
            Автонастройка включена. . . . . . : Да
            Локальный IPv6-адрес канала . . . : fe80::680c:d235:b5:89eb%22(Основной)
            IPv4-адрес. . . . . . . . . . . . : 192.168.56.1(Основной)
            Маска подсети . . . . . . . . . . : 255.255.255.0
            Основной шлюз. . . . . . . . . :
            IAID DHCPv6 . . . . . . . . . . . : 805961767
            DUID клиента DHCPv6 . . . . . . . : 00-01-00-01-26-E8-CC-E7-5C-3A-45-9E-61-79
            NetBios через TCP/IP. . . . . . . . : Включен

         Адаптер беспроводной локальной сети Подключение по локальной сети* 1:

            Состояние среды. . . . . . . . : Среда передачи недоступна.
            DNS-суффикс подключения . . . . . :
            Описание. . . . . . . . . . . . . : Microsoft Wi-Fi Direct Virtual Adapter #3
            Физический адрес. . . . . . . . . : 5C-3A-45-9E-61-79
            DHCP включен. . . . . . . . . . . : Да
            Автонастройка включена. . . . . . : Да

         Адаптер беспроводной локальной сети Подключение по локальной сети* 2:

            Состояние среды. . . . . . . . : Среда передачи недоступна.
            DNS-суффикс подключения . . . . . :
            Описание. . . . . . . . . . . . . : Microsoft Wi-Fi Direct Virtual Adapter #4
            Физический адрес. . . . . . . . . : DE-3A-45-9E-61-79
            DHCP включен. . . . . . . . . . . : Да
            Автонастройка включена. . . . . . : Да

         Адаптер беспроводной локальной сети Беспроводная сеть:

            DNS-суффикс подключения . . . . . :
            Описание. . . . . . . . . . . . . : Realtek 8822CE Wireless LAN 802.11ac PCI-E NIC
            Физический адрес. . . . . . . . . : 5C-3A-45-9E-61-79
            DHCP включен. . . . . . . . . . . : Да
            Автонастройка включена. . . . . . : Да
            Локальный IPv6-адрес канала . . . : fe80::713f:746c:436d:9deb%8(Основной)
            IPv4-адрес. . . . . . . . . . . . : 192.168.3.121(Основной)
            Маска подсети . . . . . . . . . . : 255.255.255.0
            Аренда получена. . . . . . . . . . : 2 декабря 2021 г. 11:33:38
            Срок аренды истекает. . . . . . . . . . : 4 декабря 2021 г. 21:34:47
            Основной шлюз. . . . . . . . . : 192.168.3.1
            DHCP-сервер. . . . . . . . . . . : 192.168.3.1
            IAID DHCPv6 . . . . . . . . . . . : 257702469
            DUID клиента DHCPv6 . . . . . . . : 00-01-00-01-26-E8-CC-E7-5C-3A-45-9E-61-79
            DNS-серверы. . . . . . . . . . . : 192.168.3.1
            NetBios через TCP/IP. . . . . . . . : Включен


           vagrant@vagrant:~$ ip link show
           1: lo: <LOOPBACK,UP,LOWER_UP> mtu 65536 qdisc noqueue state UNKNOWN mode DEFAULT group default qlen 1000
               link/loopback 00:00:00:00:00:00 brd 00:00:00:00:00:00
           2: eth0: <BROADCAST,MULTICAST,UP,LOWER_UP> mtu 1500 qdisc fq_codel state UP mode DEFAULT group default qlen 1000
               link/ether 08:00:27:73:60:cf brd ff:ff:ff:ff:ff:ff
    
2. Какой протокол используется для распознавания соседа по сетевому интерфейсу? Какой пакет и команды есть в Linux для этого?
       
           lldp (lldpd) cdp

3. Какая технология используется для разделения L2 коммутатора на несколько виртуальных сетей? Какой пакет и команды есть в Linux для этого? Приведите пример конфига.
       
              vlan 802.1Q

              auto eth0.1400
               iface eth0.1400 inet static
               address 192.168.1.1
               netmask 255.255.255.0
               vlan_raw_device eth0

4. Какие типы агрегации интерфейсов есть в Linux? Какие опции есть для балансировки нагрузки? Приведите пример конфига.

             Mode-0(balance-rr) – Данный режим используется по умолчанию. Balance-rr обеспечивается балансировку нагрузки и отказоустойчивость. В данном режиме сетевые пакеты отправляются “по кругу”, от первого интерфейса к последнему. Если выходят из строя интерфейсы, пакеты отправляются на остальные оставшиеся. Дополнительной настройки коммутатора не требуется при нахождении портов в одном коммутаторе. При разностных коммутаторах требуется дополнительная настройка.

             Mode-1(active-backup) – Один из интерфейсов работает в активном режиме, остальные в ожидающем. При обнаружении проблемы на активном интерфейсе производится переключение на ожидающий интерфейс. Не требуется поддержки от коммутатора.

             Mode-2(balance-xor) – Передача пакетов распределяется по типу входящего и исходящего трафика по формуле ((MAC src) XOR (MAC dest)) % число интерфейсов. Режим дает балансировку нагрузки и отказоустойчивость. Не требуется дополнительной настройки коммутатора/коммутаторов.

             Mode-3(broadcast) – Происходит передача во все объединенные интерфейсы, тем самым обеспечивая отказоустойчивость. Рекомендуется только для использования MULTICAST трафика.

             Mode-4(802.3ad) – динамическое объединение одинаковых портов. В данном режиме можно значительно увеличить пропускную способность входящего так и исходящего трафика. Для данного режима необходима поддержка и настройка коммутатора/коммутаторов.

             Mode-5(balance-tlb) – Адаптивная балансировки нагрузки трафика. Входящий трафик получается только активным интерфейсом, исходящий распределяется в зависимости от текущей загрузки канала каждого интерфейса. Не требуется специальной поддержки и настройки коммутатора/коммутаторов.

             Mode-6(balance-alb) – Адаптивная балансировка нагрузки. Отличается более совершенным алгоритмом балансировки нагрузки чем Mode-5). Обеспечивается балансировку нагрузки как исходящего так и входящего трафика. Не требуется специальной поддержки и настройки коммутатора/коммутаторов. 
             
             network: 
                 renderer: networkd 
                 version: 2 
                 ethernets: 
                     eth0:
                       dhcp4: no
                     eth1:
                       dhcp4: no
                 bonds: 
                   bond0:
                     dhcp4: no
                     interfaces: [eth0, eth1]
                     parameters:
                       mode: 802.3ad
                       mii-monitor-interval: 1

5. Сколько IP адресов в сети с маской /29 ? Сколько /29 подсетей можно получить из сети с маской /24. Приведите несколько примеров /29 подсетей внутри сети 10.10.10.0/24.

                 Hosts/Net: 6      
                 32 подсети /29 в сети /24
                 192.168.0.8/29
                 192.168.0.64/29

6. Задача: вас попросили организовать стык между 2-мя организациями. Диапазоны 10.0.0.0/8, 172.16.0.0/12, 192.168.0.0/16 уже заняты. Из какой подсети допустимо взять частные IP адреса? Маску выберите из расчета максимум 40-50 хостов внутри подсети.
       
      100.64.0.0/27 
       
7. Как проверить ARP таблицу в Linux, Windows? Как очистить ARP кеш полностью? Как из ARP таблицы удалить только один нужный IP?

               arp -a 
               Интерфейс: 192.168.3.121 --- 0x8
                 адрес в Интернете      Физический адрес      Тип
                 192.168.3.1           94-37-f7-ea-20-e6     динамический
                 192.168.3.255         ff-ff-ff-ff-ff-ff     статический
                 224.0.0.22            01-00-5e-00-00-16     статический
                 224.0.0.251           01-00-5e-00-00-fb     статический
                 224.0.0.252           01-00-5e-00-00-fc     статический
                 239.255.255.250       01-00-5e-7f-ff-fa     статический
                 255.255.255.255       ff-ff-ff-ff-ff-ff     статический

               Интерфейс: 172.20.111.105 --- 0x14
                 адрес в Интернете      Физический адрес      Тип
                 172.20.96.1           00-11-22-33-44-55     динамический
                 172.20.111.255        ff-ff-ff-ff-ff-ff     статический
                 224.0.0.22            01-00-5e-00-00-16     статический
                 224.0.0.252           01-00-5e-00-00-fc     статический
                 239.255.255.250       01-00-5e-7f-ff-fa     статический

               Интерфейс: 192.168.56.1 --- 0x16
                 адрес в Интернете      Физический адрес      Тип
                 192.168.56.255        ff-ff-ff-ff-ff-ff     статический
                 224.0.0.7             01-00-5e-00-00-07     статический
                 224.0.0.22            01-00-5e-00-00-16     статический
                 224.0.0.251           01-00-5e-00-00-fb     статический
                 224.0.0.252           01-00-5e-00-00-fc     статический
                 239.255.255.250       01-00-5e-7f-ff-fa     статический

                • -d — удаление IP-адреса 
                • -d -a — удаление всех записей в таблице ARP;

                vagrant@vagrant:~$ ip neigh show
                10.0.2.2 dev eth0 lladdr 52:54:00:12:35:02 REACHABLE
                vagrant@vagrant:~$ sudo ip neigh add 10.0.2.3 dev eth0 lladdr 52:54:00:12:35:00
                vagrant@vagrant:~$ ip neigh show
                10.0.2.2 dev eth0 lladdr 52:54:00:12:35:02 REACHABLE
                10.0.2.3 dev eth0 lladdr 52:54:00:12:35:00 PERMANENT
                vagrant@vagrant:~$ sudo ip neigh del 10.0.2.3 dev eth0 lladdr 52:54:00:12:35:00
                vagrant@vagrant:~$ ip neigh show
                10.0.2.2 dev eth0 lladdr 52:54:00:12:35:02 REACHABLE


